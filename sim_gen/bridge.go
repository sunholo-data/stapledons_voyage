// Code generated by ailang. DO NOT EDIT.
package sim_gen

import (
	"math"
)

func colorFloor_impl(_unused0 interface{}) interface{} {
	return int64(707406591)
}

func colorFloor() int64 {
	return colorFloor_impl(struct{}{}).(int64)
}

func colorFloorGlow_impl(_unused0 interface{}) interface{} {
	return int64(858993919)
}

func colorFloorGlow() int64 {
	return colorFloorGlow_impl(struct{}{}).(int64)
}

func colorDomeEdge_impl(_unused0 interface{}) interface{} {
	return int64(439041279)
}

func colorDomeEdge() int64 {
	return colorDomeEdge_impl(struct{}{}).(int64)
}

func colorWalkway_impl(_unused0 interface{}) interface{} {
	return int64(1145324799)
}

func colorWalkway() int64 {
	return colorWalkway_impl(struct{}{}).(int64)
}

func colorCaptainArea_impl(_unused0 interface{}) interface{} {
	return int64(606348543)
}

func colorCaptainArea() int64 {
	return colorCaptainArea_impl(struct{}{}).(int64)
}

func colorWall_impl(_unused0 interface{}) interface{} {
	return int64(252645631)
}

func colorWall() int64 {
	return colorWall_impl(struct{}{}).(int64)
}

func colorHelm_impl(_unused0 interface{}) interface{} {
	return int64(4120593151)
}

func colorHelm() int64 {
	return colorHelm_impl(struct{}{}).(int64)
}

func colorComms_impl(_unused0 interface{}) interface{} {
	return int64(14540799)
}

func colorComms() int64 {
	return colorComms_impl(struct{}{}).(int64)
}

func colorStatus_impl(_unused0 interface{}) interface{} {
	return int64(2566914303)
}

func colorStatus() int64 {
	return colorStatus_impl(struct{}{}).(int64)
}

func colorNav_impl(_unused0 interface{}) interface{} {
	return int64(4294935039)
}

func colorNav() int64 {
	return colorNav_impl(struct{}{}).(int64)
}

func colorScience_impl(_unused0 interface{}) interface{} {
	return int64(16744447)
}

func colorScience() int64 {
	return colorScience_impl(struct{}{}).(int64)
}

func colorCaptain_impl(_unused0 interface{}) interface{} {
	return int64(4294940415)
}

func colorCaptain() int64 {
	return colorCaptain_impl(struct{}{}).(int64)
}

func colorCrewPilot_impl(_unused0 interface{}) interface{} {
	return int64(4120593151)
}

func colorCrewPilot() int64 {
	return colorCrewPilot_impl(struct{}{}).(int64)
}

func colorCrewComms_impl(_unused0 interface{}) interface{} {
	return int64(14540799)
}

func colorCrewComms() int64 {
	return colorCrewComms_impl(struct{}{}).(int64)
}

func colorCrewEngineer_impl(_unused0 interface{}) interface{} {
	return int64(2566914303)
}

func colorCrewEngineer() int64 {
	return colorCrewEngineer_impl(struct{}{}).(int64)
}

func colorCrewScientist_impl(_unused0 interface{}) interface{} {
	return int64(16744447)
}

func colorCrewScientist() int64 {
	return colorCrewScientist_impl(struct{}{}).(int64)
}

func colorCrewCaptain_impl(_unused0 interface{}) interface{} {
	return int64(4294940415)
}

func colorCrewCaptain() int64 {
	return colorCrewCaptain_impl(struct{}{}).(int64)
}

func colorPlayer_impl(_unused0 interface{}) interface{} {
	return int64(65280)
}

func colorPlayer() int64 {
	return colorPlayer_impl(struct{}{}).(int64)
}

func makeDomeViewState_impl(planetId interface{}, velocity interface{}, angle interface{}) interface{} {
	return &DomeViewState{TargetPlanetId: planetId.(int64), ShipVelocity: velocity.(float64), ViewAngle: angle.(float64)}
}

func MakeDomeViewState(planetId int64, velocity float64, angle float64) *DomeViewState {
	return makeDomeViewState_impl(planetId, velocity, angle).(*DomeViewState)
}

func initDomeState_impl(_unused0 interface{}) interface{} {
	return &DomeState{CruiseTime: float64(0), CruiseDuration: float64(60), CruiseVelocity: float64(0.15), CameraZ: float64(10), TargetPlanet: int64(4)}
}

func InitDomeState() *DomeState {
	return initDomeState_impl(struct{}{}).(*DomeState)
}

func stepDome_impl(state interface{}, dt interface{}) interface{} {
	var newTime interface{} = func() interface{} {
		var tmp12 interface{} = FieldGet(state, "cruiseTime")
		_ = tmp12 // suppress unused
		return AddFloat(tmp12, dt)
	}()
	var loopedTime interface{} = func() interface{} {
		var tmp10 interface{} = FieldGet(state, "cruiseDuration")
		_ = tmp10 // suppress unused
		var tmp11 interface{} = GtFloat(newTime, tmp10)
		_ = tmp11 // suppress unused
		return func() interface{} {
			if tmp11.(bool) {
				return float64(0)
			}
			return newTime
		}()
	}()
	var progress interface{} = func() interface{} {
		var tmp9 interface{} = FieldGet(state, "cruiseDuration")
		_ = tmp9 // suppress unused
		return DivFloat(loopedTime, tmp9)
	}()
	var eased interface{} = func() interface{} {
		var tmp6 interface{} = MulFloat(progress, progress)
		_ = tmp6 // suppress unused
		var tmp7 interface{} = MulFloat(float64(2), progress)
		_ = tmp7 // suppress unused
		var tmp8 interface{} = SubFloat(float64(3), tmp7)
		_ = tmp8 // suppress unused
		return MulFloat(tmp6, tmp8)
	}()
	var startZ interface{} = float64(10)
	var endZ interface{} = SubFloat(float64(0), float64(155))
	var newCamZ interface{} = func() interface{} {
		var tmp4 interface{} = SubFloat(startZ, endZ)
		_ = tmp4 // suppress unused
		var tmp5 interface{} = MulFloat(tmp4, eased)
		_ = tmp5 // suppress unused
		return SubFloat(startZ, tmp5)
	}()
	var tmp1 interface{} = FieldGet(state, "cruiseDuration")
	var tmp2 interface{} = FieldGet(state, "cruiseVelocity")
	var tmp3 interface{} = FieldGet(state, "targetPlanet")
	return &DomeState{CruiseTime: loopedTime.(float64), CruiseDuration: tmp1.(float64), CruiseVelocity: tmp2.(float64), CameraZ: newCamZ.(float64), TargetPlanet: tmp3.(int64)}
}

func StepDome(state *DomeState, dt float64) *DomeState {
	return stepDome_impl(state, dt).(*DomeState)
}

func getPlanets_impl(_unused0 interface{}) interface{} {
	var tmp13 interface{} = &Planet{Name: "Neptune", ColorRGBA: int64(1350665471), Distance: float64(15), Radius: float64(20), YOffset: float64(2.25)}
	var tmp14 interface{} = &Planet{Name: "Saturn", ColorRGBA: int64(3535748351), Distance: float64(50), Radius: float64(36), YOffset: float64(7.5)}
	var tmp15 interface{} = &Planet{Name: "Jupiter", ColorRGBA: int64(3702191359), Distance: float64(90), Radius: float64(44), YOffset: float64(13.5)}
	var tmp16 interface{} = &Planet{Name: "Mars", ColorRGBA: int64(3361734911), Distance: float64(130), Radius: float64(10), YOffset: float64(19.5)}
	var tmp17 interface{} = &Planet{Name: "Earth", ColorRGBA: int64(1014743295), Distance: float64(150), Radius: float64(14), YOffset: float64(22.5)}
	return []interface{}{tmp13, tmp14, tmp15, tmp16, tmp17}
}

func GetPlanets() []*Planet {
	return getPlanets_impl(struct{}{}).([]*Planet)
}

func getDomeVelocity_impl(state interface{}) interface{} {
	return FieldGet(state, "cruiseVelocity")
}

func GetDomeVelocity(state *DomeState) float64 {
	return getDomeVelocity_impl(state).(float64)
}

func getDomeProgress_impl(state interface{}) interface{} {
	var tmp18 interface{} = FieldGet(state, "cruiseTime")
	var tmp19 interface{} = FieldGet(state, "cruiseDuration")
	return DivFloat(tmp18, tmp19)
}

func GetDomeProgress(state *DomeState) float64 {
	return getDomeProgress_impl(state).(float64)
}

func layerDome_impl(_unused0 interface{}) interface{} {
	return SubInt(int64(0), int64(10))
}

func layerDome() int64 {
	return layerDome_impl(struct{}{}).(int64)
}

func renderPlanet_impl(planet interface{}, cameraZ interface{}, scrW interface{}, scrH interface{}) interface{} {
	var relZ interface{} = func() interface{} {
		var tmp29 interface{} = FieldGet(planet, "distance")
		_ = tmp29 // suppress unused
		return AddFloat(tmp29, cameraZ)
	}()
	var tmp20 interface{} = LeFloat(relZ, float64(0.5))
	return func() interface{} {
		var scale interface{} = DivFloat(float64(100), relZ)
		_ = scale // suppress unused
		var screenX interface{} = DivFloat(scrW, float64(2))
		_ = screenX // suppress unused
		var baseY interface{} = float64(200)
		_ = baseY // suppress unused
		var screenY interface{} = func() interface{} {
			var tmp26 interface{} = FieldGet(planet, "yOffset")
			_ = tmp26 // suppress unused
			return func() interface{} {
				var tmp27 interface{} = MulFloat(tmp26, scale)
				_ = tmp27 // suppress unused
				return func() interface{} {
					var tmp28 interface{} = MulFloat(tmp27, float64(5))
					_ = tmp28 // suppress unused
					return AddFloat(baseY, tmp28)
				}()
			}()
		}()
		_ = screenY // suppress unused
		var visibleRadius interface{} = func() interface{} {
			var tmp25 interface{} = FieldGet(planet, "radius")
			_ = tmp25 // suppress unused
			return MulFloat(tmp25, scale)
		}()
		_ = visibleRadius // suppress unused
		var tmp21 interface{} = LtFloat(visibleRadius, float64(1))
		_ = tmp21 // suppress unused
		if tmp20.(bool) {
			return []interface{}{}
		}
		if tmp21.(bool) {
			return []interface{}{}
		}
		return func() interface{} {
			var tmp22 interface{} = FieldGet(planet, "colorRGBA")
			_ = tmp22 // suppress unused
			return func() interface{} {
				var tmp23 interface{} = layerDome_impl(struct{}{})
				_ = tmp23 // suppress unused
				return func() interface{} {
					var tmp24 interface{} = NewDrawCmdCircleRGBA(screenX.(float64), screenY.(float64), visibleRadius.(float64), tmp22.(int64), true, tmp23.(int64))
					_ = tmp24 // suppress unused
					return []interface{}{tmp24}
				}()
			}()
		}()
	}()
}

func renderPlanet(planet *Planet, cameraZ float64, scrW float64, scrH float64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderPlanet_impl(planet, cameraZ, scrW, scrH))
}

func renderPlanetsRec_impl(planets interface{}, cameraZ interface{}, scrW interface{}, scrH interface{}) interface{} {
	return func() interface{} {
		_scrutinee := planets
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return []interface{}{}
		} else if ListLen(_scrutinee) >= 1 {
			p := ListHead(_scrutinee)
			_ = p // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp30 interface{} = renderPlanet_impl(p, cameraZ, scrW, scrH)
				_ = tmp30 // suppress unused
				var tmp31 interface{} = renderPlanetsRec_impl(rest, cameraZ, scrW, scrH)
				_ = tmp31 // suppress unused
				return Concat(tmp30, tmp31)
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func renderPlanetsRec(planets []*Planet, cameraZ float64, scrW float64, scrH float64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderPlanetsRec_impl(planets, cameraZ, scrW, scrH))
}

func screenWidth_impl(_unused0 interface{}) interface{} {
	return float64(1280)
}

func screenWidth() float64 {
	return screenWidth_impl(struct{}{}).(float64)
}

func screenHeight_impl(_unused0 interface{}) interface{} {
	return float64(960)
}

func screenHeight() float64 {
	return screenHeight_impl(struct{}{}).(float64)
}

func renderDomePlanets_impl(state interface{}) interface{} {
	var scrW interface{} = screenWidth_impl(struct{}{})
	var scrH interface{} = screenHeight_impl(struct{}{})
	var tmp32 interface{} = getPlanets_impl(struct{}{})
	var tmp33 interface{} = FieldGet(state, "cameraZ")
	return renderPlanetsRec_impl(tmp32, tmp33, scrW, scrH)
}

func RenderDomePlanets(state *DomeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderDomePlanets_impl(state))
}

func layerDomeBg_impl(_unused0 interface{}) interface{} {
	return SubInt(int64(0), int64(20))
}

func layerDomeBg() int64 {
	return layerDomeBg_impl(struct{}{}).(int64)
}

func layerBubbleArc3D_impl(_unused0 interface{}) interface{} {
	return int64(5)
}

func layerBubbleArc3D() int64 {
	return layerBubbleArc3D_impl(struct{}{}).(int64)
}

func renderDome_impl(state interface{}) interface{} {
	var tmp34 interface{} = layerDomeBg_impl(struct{}{})
	var tmp35 interface{} = NewDrawCmdSpaceBg(tmp34.(int64))
	var tmp36 interface{} = layerBubbleArc3D_impl(struct{}{})
	var tmp37 interface{} = NewDrawCmdBubbleArc(tmp36.(int64))
	return []interface{}{tmp35, tmp37}
}

func RenderDome(state *DomeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderDome_impl(state))
}

func strutColor_impl(_unused0 interface{}) interface{} {
	return int64(1275068520)
}

func strutColor() int64 {
	return strutColor_impl(struct{}{}).(int64)
}

func strutHighlight_impl(_unused0 interface{}) interface{} {
	return int64(1887670408)
}

func strutHighlight() int64 {
	return strutHighlight_impl(struct{}{}).(int64)
}

func layerStruts_impl(_unused0 interface{}) interface{} {
	return NegInt(int64(1))
}

func layerStruts() int64 {
	return layerStruts_impl(struct{}{}).(int64)
}

func strutCount_impl(_unused0 interface{}) interface{} {
	return int64(8)
}

func strutCount() int64 {
	return strutCount_impl(struct{}{}).(int64)
}

func arcCenterY_impl(_unused0 interface{}) interface{} {
	return float64(1600)
}

func arcCenterY() float64 {
	return arcCenterY_impl(struct{}{}).(float64)
}

func arcRadius_impl(_unused0 interface{}) interface{} {
	return float64(900)
}

func arcRadius() float64 {
	return arcRadius_impl(struct{}{}).(float64)
}

func strutBaseX_impl(index interface{}, total interface{}) interface{} {
	var centerX interface{} = func() interface{} {
		var tmp48 interface{} = screenWidth_impl(struct{}{})
		_ = tmp48 // suppress unused
		return DivFloat(tmp48, float64(2))
	}()
	var angleRange interface{} = func() interface{} {
		var tmp47 interface{} = math.Pi
		_ = tmp47 // suppress unused
		return DivFloat(tmp47, float64(3))
	}()
	var angleStep interface{} = func() interface{} {
		var tmp44 interface{} = MulFloat(angleRange, float64(2))
		_ = tmp44 // suppress unused
		var tmp45 interface{} = SubInt(total, int64(1))
		_ = tmp45 // suppress unused
		var tmp46 interface{} = IntToFloat(tmp45)
		_ = tmp46 // suppress unused
		return DivFloat(tmp44, tmp46)
	}()
	var angle interface{} = func() interface{} {
		var tmp41 interface{} = SubFloat(float64(0), angleRange)
		_ = tmp41 // suppress unused
		var tmp42 interface{} = IntToFloat(index)
		_ = tmp42 // suppress unused
		var tmp43 interface{} = MulFloat(tmp42, angleStep)
		_ = tmp43 // suppress unused
		return AddFloat(tmp41, tmp43)
	}()
	var tmp38 interface{} = arcRadius_impl(struct{}{})
	var tmp39 interface{} = math.Sin(angle.(float64))
	var tmp40 interface{} = MulFloat(tmp38, tmp39)
	return AddFloat(centerX, tmp40)
}

func strutBaseX(index int64, total int64) float64 {
	return strutBaseX_impl(index, total).(float64)
}

func strutBaseY_impl(index interface{}, total interface{}) interface{} {
	var angleRange interface{} = func() interface{} {
		var tmp59 interface{} = math.Pi
		_ = tmp59 // suppress unused
		return DivFloat(tmp59, float64(3))
	}()
	var angleStep interface{} = func() interface{} {
		var tmp56 interface{} = MulFloat(angleRange, float64(2))
		_ = tmp56 // suppress unused
		var tmp57 interface{} = SubInt(total, int64(1))
		_ = tmp57 // suppress unused
		var tmp58 interface{} = IntToFloat(tmp57)
		_ = tmp58 // suppress unused
		return DivFloat(tmp56, tmp58)
	}()
	var angle interface{} = func() interface{} {
		var tmp53 interface{} = SubFloat(float64(0), angleRange)
		_ = tmp53 // suppress unused
		var tmp54 interface{} = IntToFloat(index)
		_ = tmp54 // suppress unused
		var tmp55 interface{} = MulFloat(tmp54, angleStep)
		_ = tmp55 // suppress unused
		return AddFloat(tmp53, tmp55)
	}()
	var tmp49 interface{} = arcCenterY_impl(struct{}{})
	var tmp50 interface{} = arcRadius_impl(struct{}{})
	var tmp51 interface{} = math.Cos(angle.(float64))
	var tmp52 interface{} = MulFloat(tmp50, tmp51)
	return SubFloat(tmp49, tmp52)
}

func strutBaseY(index int64, total int64) float64 {
	return strutBaseY_impl(index, total).(float64)
}

func strutTopX_impl(index interface{}, total interface{}) interface{} {
	var baseX interface{} = strutBaseX_impl(index, total)
	var centerX interface{} = func() interface{} {
		var tmp61 interface{} = screenWidth_impl(struct{}{})
		_ = tmp61 // suppress unused
		return DivFloat(tmp61, float64(2))
	}()
	var dx interface{} = SubFloat(baseX, centerX)
	var tmp60 interface{} = MulFloat(dx, float64(0.3))
	return AddFloat(baseX, tmp60)
}

func strutTopX(index int64, total int64) float64 {
	return strutTopX_impl(index, total).(float64)
}

func strutTopY_impl(index interface{}, total interface{}) interface{} {
	var baseY interface{} = strutBaseY_impl(index, total)
	return SubFloat(baseY, float64(150))
}

func strutTopY(index int64, total int64) float64 {
	return strutTopY_impl(index, total).(float64)
}

func strutParallax_impl(index interface{}, total interface{}, cameraZ interface{}) interface{} {
	var centerIndex interface{} = func() interface{} {
		var tmp65 interface{} = SubInt(total, int64(1))
		_ = tmp65 // suppress unused
		var tmp66 interface{} = IntToFloat(tmp65)
		_ = tmp66 // suppress unused
		return DivFloat(tmp66, float64(2))
	}()
	var offsetFromCenter interface{} = func() interface{} {
		var tmp64 interface{} = IntToFloat(index)
		_ = tmp64 // suppress unused
		return SubFloat(tmp64, centerIndex)
	}()
	var progress interface{} = func() interface{} {
		var tmp63 interface{} = SubFloat(float64(10), cameraZ)
		_ = tmp63 // suppress unused
		return DivFloat(tmp63, float64(165))
	}()
	var tmp62 interface{} = MulFloat(offsetFromCenter, progress)
	return MulFloat(tmp62, float64(3))
}

func strutParallax(index int64, total int64, cameraZ float64) float64 {
	return strutParallax_impl(index, total, cameraZ).(float64)
}

func renderStrutWithParallax_impl(index interface{}, total interface{}, cameraZ interface{}) interface{} {
	var parallax interface{} = strutParallax_impl(index, total, cameraZ)
	var tmp67 interface{} = strutBaseX_impl(index, total)
	var tmp68 interface{} = strutBaseY_impl(index, total)
	var tmp69 interface{} = strutTopX_impl(index, total)
	var tmp70 interface{} = AddFloat(tmp69, parallax)
	var tmp71 interface{} = strutTopY_impl(index, total)
	var tmp72 interface{} = strutColor_impl(struct{}{})
	var tmp73 interface{} = layerStruts_impl(struct{}{})
	return NewDrawCmdLine(tmp67.(float64), tmp68.(float64), tmp70.(float64), tmp71.(float64), tmp72.(int64), float64(2), tmp73.(int64))
}

func renderStrutWithParallax(index int64, total int64, cameraZ float64) *DrawCmd {
	return renderStrutWithParallax_impl(index, total, cameraZ).(*DrawCmd)
}

func renderStrutsRec_impl(index interface{}, total interface{}, cameraZ interface{}) interface{} {
	var tmp74 interface{} = GeInt(index, total)
	return func() interface{} {
		if tmp74.(bool) {
			return []interface{}{}
		}
		return func() interface{} {
			var tmp75 interface{} = renderStrutWithParallax_impl(index, total, cameraZ)
			_ = tmp75 // suppress unused
			var tmp76 interface{} = AddInt(index, int64(1))
			_ = tmp76 // suppress unused
			var tmp77 interface{} = renderStrutsRec_impl(tmp76, total, cameraZ)
			_ = tmp77 // suppress unused
			return Cons(tmp75, tmp77)
		}()
	}()
}

func renderStrutsRec(index int64, total int64, cameraZ float64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderStrutsRec_impl(index, total, cameraZ))
}

func renderStruts_impl(state interface{}) interface{} {
	var tmp78 interface{} = strutCount_impl(struct{}{})
	var tmp79 interface{} = FieldGet(state, "domeState")
	var tmp80 interface{} = FieldGet(tmp79, "cameraZ")
	return renderStrutsRec_impl(int64(0), tmp78, tmp80)
}

func RenderStruts(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderStruts_impl(state))
}

func tileFloor_impl(_unused0 interface{}) interface{} {
	return int64(1000)
}

func TileFloor() int64 {
	return tileFloor_impl(struct{}{}).(int64)
}

func tileFloorGlow_impl(_unused0 interface{}) interface{} {
	return int64(1001)
}

func TileFloorGlow() int64 {
	return tileFloorGlow_impl(struct{}{}).(int64)
}

func tileConsoleBase_impl(_unused0 interface{}) interface{} {
	return int64(1002)
}

func TileConsoleBase() int64 {
	return tileConsoleBase_impl(struct{}{}).(int64)
}

func tileWalkway_impl(_unused0 interface{}) interface{} {
	return int64(1003)
}

func TileWalkway() int64 {
	return tileWalkway_impl(struct{}{}).(int64)
}

func tileDomeEdge_impl(_unused0 interface{}) interface{} {
	return int64(1004)
}

func TileDomeEdge() int64 {
	return tileDomeEdge_impl(struct{}{}).(int64)
}

func tileWall_impl(_unused0 interface{}) interface{} {
	return int64(1005)
}

func TileWall() int64 {
	return tileWall_impl(struct{}{}).(int64)
}

func tileHatch_impl(_unused0 interface{}) interface{} {
	return int64(1006)
}

func TileHatch() int64 {
	return tileHatch_impl(struct{}{}).(int64)
}

func tileCaptainArea_impl(_unused0 interface{}) interface{} {
	return int64(1007)
}

func TileCaptainArea() int64 {
	return tileCaptainArea_impl(struct{}{}).(int64)
}

func spriteConsoleHelm_impl(_unused0 interface{}) interface{} {
	return int64(1100)
}

func SpriteConsoleHelm() int64 {
	return spriteConsoleHelm_impl(struct{}{}).(int64)
}

func spriteConsoleComms_impl(_unused0 interface{}) interface{} {
	return int64(1101)
}

func SpriteConsoleComms() int64 {
	return spriteConsoleComms_impl(struct{}{}).(int64)
}

func spriteConsoleStatus_impl(_unused0 interface{}) interface{} {
	return int64(1102)
}

func SpriteConsoleStatus() int64 {
	return spriteConsoleStatus_impl(struct{}{}).(int64)
}

func spriteConsoleNav_impl(_unused0 interface{}) interface{} {
	return int64(1103)
}

func SpriteConsoleNav() int64 {
	return spriteConsoleNav_impl(struct{}{}).(int64)
}

func spriteConsoleScience_impl(_unused0 interface{}) interface{} {
	return int64(1104)
}

func SpriteConsoleScience() int64 {
	return spriteConsoleScience_impl(struct{}{}).(int64)
}

func spriteConsoleCaptain_impl(_unused0 interface{}) interface{} {
	return int64(1105)
}

func SpriteConsoleCaptain() int64 {
	return spriteConsoleCaptain_impl(struct{}{}).(int64)
}

func spriteCrewPilot_impl(_unused0 interface{}) interface{} {
	return int64(1200)
}

func SpriteCrewPilot() int64 {
	return spriteCrewPilot_impl(struct{}{}).(int64)
}

func spriteCrewComms_impl(_unused0 interface{}) interface{} {
	return int64(1200)
}

func SpriteCrewComms() int64 {
	return spriteCrewComms_impl(struct{}{}).(int64)
}

func spriteCrewEngineer_impl(_unused0 interface{}) interface{} {
	return int64(1202)
}

func SpriteCrewEngineer() int64 {
	return spriteCrewEngineer_impl(struct{}{}).(int64)
}

func spriteCrewScientist_impl(_unused0 interface{}) interface{} {
	return int64(1200)
}

func SpriteCrewScientist() int64 {
	return spriteCrewScientist_impl(struct{}{}).(int64)
}

func spriteCrewCaptain_impl(_unused0 interface{}) interface{} {
	return int64(1201)
}

func SpriteCrewCaptain() int64 {
	return spriteCrewCaptain_impl(struct{}{}).(int64)
}

func spritePlayer_impl(_unused0 interface{}) interface{} {
	return int64(1201)
}

func SpritePlayer() int64 {
	return spritePlayer_impl(struct{}{}).(int64)
}

func makeCoord_impl(x interface{}, y interface{}) interface{} {
	return &Coord{X: x.(int64), Y: y.(int64)}
}

func makeCoord(x int64, y int64) *Coord {
	return makeCoord_impl(x, y).(*Coord)
}

func distSq_impl(x interface{}, y interface{}, cx interface{}, cy interface{}) interface{} {
	var dx interface{} = SubInt(x, cx)
	var dy interface{} = SubInt(y, cy)
	var tmp81 interface{} = MulInt(dx, dx)
	var tmp82 interface{} = MulInt(dy, dy)
	return AddInt(tmp81, tmp82)
}

func distSq(x int64, y int64, cx int64, cy int64) int64 {
	return distSq_impl(x, y, cx, cy).(int64)
}

func isOnDisc_impl(x interface{}, y interface{}, cx interface{}, cy interface{}, radius interface{}) interface{} {
	var tmp83 interface{} = distSq_impl(x, y, cx, cy)
	var tmp84 interface{} = MulInt(radius, radius)
	return LeInt(tmp83, tmp84)
}

func IsOnDisc(x int64, y int64, cx int64, cy int64, radius int64) bool {
	return isOnDisc_impl(x, y, cx, cy, radius).(bool)
}

func isWalkable_impl(state interface{}, x interface{}, y interface{}) interface{} {
	var dSq interface{} = func() interface{} {
		var tmp87 interface{} = FieldGet(state, "discCenterX")
		_ = tmp87 // suppress unused
		var tmp88 interface{} = FieldGet(state, "discCenterY")
		_ = tmp88 // suppress unused
		return distSq_impl(x, y, tmp87, tmp88)
	}()
	var radiusSq interface{} = func() interface{} {
		var tmp85 interface{} = FieldGet(state, "discRadius")
		_ = tmp85 // suppress unused
		var tmp86 interface{} = FieldGet(state, "discRadius")
		_ = tmp86 // suppress unused
		return MulInt(tmp85, tmp86)
	}()
	return LtInt(dSq, radiusSq)
}

func IsWalkable(state *BridgeState, x int64, y int64) bool {
	return isWalkable_impl(state, x, y).(bool)
}

func getTileType_impl(x interface{}, y interface{}, cx interface{}, cy interface{}, radius interface{}) interface{} {
	var dSq interface{} = distSq_impl(x, y, cx, cy)
	var radiusSq interface{} = MulInt(radius, radius)
	var edgeSq interface{} = func() interface{} {
		var tmp96 interface{} = SubInt(radius, int64(1))
		_ = tmp96 // suppress unused
		var tmp97 interface{} = SubInt(radius, int64(1))
		_ = tmp97 // suppress unused
		return MulInt(tmp96, tmp97)
	}()
	var tmp89 interface{} = GeInt(dSq, radiusSq)
	return func() interface{} {
		var tmp90 interface{} = GeInt(dSq, edgeSq)
		_ = tmp90 // suppress unused
		var tmp91 interface{} = LeInt(dSq, int64(9))
		_ = tmp91 // suppress unused
		var tmp92 interface{} = LeInt(dSq, int64(36))
		_ = tmp92 // suppress unused
		var tmp93 interface{} = AddInt(x, y)
		_ = tmp93 // suppress unused
		var tmp94 interface{} = ModInt(tmp93, int64(8))
		_ = tmp94 // suppress unused
		var tmp95 interface{} = EqInt(tmp94, int64(0))
		_ = tmp95 // suppress unused
		if tmp89.(bool) {
			return tileWall_impl(struct{}{})
		}
		if tmp90.(bool) {
			return tileDomeEdge_impl(struct{}{})
		}
		if tmp91.(bool) {
			return tileCaptainArea_impl(struct{}{})
		}
		if tmp92.(bool) {
			return tileFloorGlow_impl(struct{}{})
		}
		if tmp95.(bool) {
			return tileWalkway_impl(struct{}{})
		}
		return tileFloor_impl(struct{}{})
	}()
}

func GetTileType(x int64, y int64, cx int64, cy int64, radius int64) int64 {
	return getTileType_impl(x, y, cx, cy, radius).(int64)
}

func viewportSize_impl(_unused0 interface{}) interface{} {
	return int64(40)
}

func ViewportSize() int64 {
	return viewportSize_impl(struct{}{}).(int64)
}

func stationSprite_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return spriteConsoleHelm_impl(struct{}{})
		case BridgeStationKindStationComms:
			return spriteConsoleComms_impl(struct{}{})
		case BridgeStationKindStationStatus:
			return spriteConsoleStatus_impl(struct{}{})
		case BridgeStationKindStationNav:
			return spriteConsoleNav_impl(struct{}{})
		case BridgeStationKindStationScience:
			return spriteConsoleScience_impl(struct{}{})
		case BridgeStationKindStationCaptain:
			return spriteConsoleCaptain_impl(struct{}{})
		case BridgeStationKindStationNone:
			return int64(0)
		default:
			panic("non-exhaustive match")
		}
	}()
}

func StationSprite(station *BridgeStation) int64 {
	return stationSprite_impl(station).(int64)
}

func crewSprite_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return spriteCrewPilot_impl(struct{}{})
		case BridgeStationKindStationComms:
			return spriteCrewComms_impl(struct{}{})
		case BridgeStationKindStationStatus:
			return spriteCrewEngineer_impl(struct{}{})
		case BridgeStationKindStationScience:
			return spriteCrewScientist_impl(struct{}{})
		case BridgeStationKindStationCaptain:
			return spriteCrewCaptain_impl(struct{}{})
		case BridgeStationKindStationNav:
			return spriteCrewEngineer_impl(struct{}{})
		case BridgeStationKindStationNone:
			return spriteCrewPilot_impl(struct{}{})
		default:
			panic("non-exhaustive match")
		}
	}()
}

func CrewSprite(station *BridgeStation) int64 {
	return crewSprite_impl(station).(int64)
}

func moveInDirection_impl(pos interface{}, dir interface{}) interface{} {
	var px interface{} = FieldGet(pos, "x")
	var py interface{} = FieldGet(pos, "y")
	return func() interface{} {
		_scrutinee := dir
		_ = _scrutinee // suppress unused
		switch _scrutinee {
		default:
			return func() interface{} {
				var tmp98 interface{} = SubInt(py, int64(1))
				_ = tmp98 // suppress unused
				return makeCoord_impl(px, tmp98)
			}()
		}
	}()
}

func MoveInDirection(pos *Coord, dir *Direction) *Coord {
	return moveInDirection_impl(pos, dir).(*Coord)
}

func discRadiusDefault_impl(_unused0 interface{}) interface{} {
	return int64(18)
}

func DiscRadiusDefault() int64 {
	return discRadiusDefault_impl(struct{}{}).(int64)
}

func discCenterDefault_impl(_unused0 interface{}) interface{} {
	return int64(24)
}

func DiscCenterDefault() int64 {
	return discCenterDefault_impl(struct{}{}).(int64)
}

func createConsoles_impl(_unused0 interface{}) interface{} {
	var cx interface{} = discCenterDefault_impl(struct{}{})
	var cy interface{} = discCenterDefault_impl(struct{}{})
	var tmp102 interface{} = SubInt(cy, int64(10))
	var tmp103 interface{} = makeCoord_impl(cx, tmp102)
	var tmp104 interface{} = spriteConsoleHelm_impl(struct{}{})
	var tmp105 interface{} = &ConsoleState{Station: NewBridgeStationStationHelm(), Pos: tmp103.(*Coord), Active: true, HasAlert: false, SpriteId: tmp104.(int64)}
	var tmp106 interface{} = SubInt(cx, int64(8))
	var tmp107 interface{} = SubInt(cy, int64(8))
	var tmp108 interface{} = makeCoord_impl(tmp106, tmp107)
	var tmp109 interface{} = spriteConsoleComms_impl(struct{}{})
	var tmp110 interface{} = &ConsoleState{Station: NewBridgeStationStationComms(), Pos: tmp108.(*Coord), Active: true, HasAlert: false, SpriteId: tmp109.(int64)}
	var tmp111 interface{} = AddInt(cx, int64(8))
	var tmp112 interface{} = SubInt(cy, int64(8))
	var tmp113 interface{} = makeCoord_impl(tmp111, tmp112)
	var tmp114 interface{} = spriteConsoleStatus_impl(struct{}{})
	var tmp115 interface{} = &ConsoleState{Station: NewBridgeStationStationStatus(), Pos: tmp113.(*Coord), Active: true, HasAlert: false, SpriteId: tmp114.(int64)}
	var tmp116 interface{} = makeCoord_impl(cx, cy)
	var tmp117 interface{} = spriteConsoleCaptain_impl(struct{}{})
	var tmp118 interface{} = &ConsoleState{Station: NewBridgeStationStationCaptain(), Pos: tmp116.(*Coord), Active: true, HasAlert: false, SpriteId: tmp117.(int64)}
	var tmp119 interface{} = SubInt(cx, int64(12))
	var tmp120 interface{} = makeCoord_impl(tmp119, cy)
	var tmp121 interface{} = spriteConsoleNav_impl(struct{}{})
	var tmp122 interface{} = &ConsoleState{Station: NewBridgeStationStationNav(), Pos: tmp120.(*Coord), Active: true, HasAlert: false, SpriteId: tmp121.(int64)}
	var tmp123 interface{} = AddInt(cx, int64(12))
	var tmp124 interface{} = makeCoord_impl(tmp123, cy)
	var tmp125 interface{} = spriteConsoleScience_impl(struct{}{})
	var tmp126 interface{} = &ConsoleState{Station: NewBridgeStationStationScience(), Pos: tmp124.(*Coord), Active: true, HasAlert: false, SpriteId: tmp125.(int64)}
	return []interface{}{tmp105, tmp110, tmp115, tmp118, tmp122, tmp126}
}

func CreateConsoles() []*ConsoleState {
	return ConvertToConsoleStateSlice(createConsoles_impl(struct{}{}))
}

func createDefaultCrew_impl(_unused0 interface{}) interface{} {
	var cx interface{} = discCenterDefault_impl(struct{}{})
	var cy interface{} = discCenterDefault_impl(struct{}{})
	var tmp127 interface{} = &CrewID{Id: int64(1), Name: "Pilot Chen"}
	var tmp128 interface{} = SubInt(cy, int64(9))
	var tmp129 interface{} = makeCoord_impl(cx, tmp128)
	var tmp130 interface{} = &CrewPosition{Crew: tmp127.(*CrewID), Station: NewBridgeStationStationHelm(), Pos: tmp129.(*Coord), Facing: NewDirectionNorth(), Activity: NewCrewActivityActivityWorking()}
	var tmp131 interface{} = &CrewID{Id: int64(2), Name: "Comms Officer Patel"}
	var tmp132 interface{} = SubInt(cx, int64(8))
	var tmp133 interface{} = SubInt(cy, int64(7))
	var tmp134 interface{} = makeCoord_impl(tmp132, tmp133)
	var tmp135 interface{} = &CrewPosition{Crew: tmp131.(*CrewID), Station: NewBridgeStationStationComms(), Pos: tmp134.(*Coord), Facing: NewDirectionNorth(), Activity: NewCrewActivityActivityWorking()}
	var tmp136 interface{} = &CrewID{Id: int64(3), Name: "Engineer Torres"}
	var tmp137 interface{} = AddInt(cx, int64(8))
	var tmp138 interface{} = SubInt(cy, int64(7))
	var tmp139 interface{} = makeCoord_impl(tmp137, tmp138)
	var tmp140 interface{} = &CrewPosition{Crew: tmp136.(*CrewID), Station: NewBridgeStationStationStatus(), Pos: tmp139.(*Coord), Facing: NewDirectionNorth(), Activity: NewCrewActivityActivityWorking()}
	var tmp141 interface{} = &CrewID{Id: int64(4), Name: "Navigator Kim"}
	var tmp142 interface{} = SubInt(cx, int64(11))
	var tmp143 interface{} = makeCoord_impl(tmp142, cy)
	var tmp144 interface{} = &CrewPosition{Crew: tmp141.(*CrewID), Station: NewBridgeStationStationNav(), Pos: tmp143.(*Coord), Facing: NewDirectionEast(), Activity: NewCrewActivityActivityWorking()}
	var tmp145 interface{} = &CrewID{Id: int64(5), Name: "Science Officer Okafor"}
	var tmp146 interface{} = AddInt(cx, int64(11))
	var tmp147 interface{} = makeCoord_impl(tmp146, cy)
	var tmp148 interface{} = &CrewPosition{Crew: tmp145.(*CrewID), Station: NewBridgeStationStationScience(), Pos: tmp147.(*Coord), Facing: NewDirectionWest(), Activity: NewCrewActivityActivityWorking()}
	var tmp149 interface{} = &CrewID{Id: int64(6), Name: "Captain Reyes"}
	var tmp150 interface{} = AddInt(cy, int64(1))
	var tmp151 interface{} = makeCoord_impl(cx, tmp150)
	var tmp152 interface{} = &CrewPosition{Crew: tmp149.(*CrewID), Station: NewBridgeStationStationCaptain(), Pos: tmp151.(*Coord), Facing: NewDirectionNorth(), Activity: NewCrewActivityActivityIdle()}
	return []interface{}{tmp130, tmp135, tmp140, tmp144, tmp148, tmp152}
}

func CreateDefaultCrew() []*CrewPosition {
	return ConvertToCrewPositionSlice(createDefaultCrew_impl(struct{}{}))
}

func initBridge_impl(_unused0 interface{}) interface{} {
	var cx interface{} = discCenterDefault_impl(struct{}{})
	var cy interface{} = discCenterDefault_impl(struct{}{})
	var radius interface{} = discRadiusDefault_impl(struct{}{})
	var tmp153 interface{} = AddInt(cy, int64(16))
	var tmp154 interface{} = makeCoord_impl(cx, tmp153)
	var tmp155 interface{} = createDefaultCrew_impl(struct{}{})
	var tmp156 interface{} = createConsoles_impl(struct{}{})
	var tmp157 interface{} = makeDomeViewState_impl(int64(0), float64(0.15), float64(0))
	var tmp158 interface{} = initDomeState_impl(struct{}{})
	return &BridgeState{PlayerPos: tmp154.(*Coord), PlayerFacing: NewDirectionNorth(), MoveState: NewMoveStateMoveIdle(), CameraX: cx.(int64), CameraY: cy.(int64), CrewPositions: ConvertToCrewPositionSlice(tmp155), Consoles: ConvertToConsoleStateSlice(tmp156), HoveredInteractable: NewOptionNone(), SelectedInteractable: NewOptionNone(), DomeView: tmp157.(*DomeViewState), DomeState: tmp158.(*DomeState), Tick: int64(0), DiscRadius: radius.(int64), DiscCenterX: cx.(int64), DiscCenterY: cy.(int64)}
}

func InitBridge() *BridgeState {
	return initBridge_impl(struct{}{}).(*BridgeState)
}

func layerFloor_impl(_unused0 interface{}) interface{} {
	return int64(0)
}

func layerFloor() int64 {
	return layerFloor_impl(struct{}{}).(int64)
}

func layerConsoles_impl(_unused0 interface{}) interface{} {
	return int64(1)
}

func layerConsoles() int64 {
	return layerConsoles_impl(struct{}{}).(int64)
}

func layerCrew_impl(_unused0 interface{}) interface{} {
	return int64(2)
}

func layerCrew() int64 {
	return layerCrew_impl(struct{}{}).(int64)
}

func layerPlayer_impl(_unused0 interface{}) interface{} {
	return int64(3)
}

func layerPlayer() int64 {
	return layerPlayer_impl(struct{}{}).(int64)
}

func layerPlanets3D_impl(_unused0 interface{}) interface{} {
	return int64(4)
}

func layerPlanets3D() int64 {
	return layerPlanets3D_impl(struct{}{}).(int64)
}

func layerUI_impl(_unused0 interface{}) interface{} {
	return int64(100)
}

func layerUI() int64 {
	return layerUI_impl(struct{}{}).(int64)
}

func colorWhite_impl(_unused0 interface{}) interface{} {
	return int64(4294967295)
}

func colorWhite() int64 {
	return colorWhite_impl(struct{}{}).(int64)
}

func screenOffsetX_impl(_unused0 interface{}) interface{} {
	return float64(640)
}

func screenOffsetX() float64 {
	return screenOffsetX_impl(struct{}{}).(float64)
}

func screenOffsetY_impl(_unused0 interface{}) interface{} {
	return float64(750)
}

func screenOffsetY() float64 {
	return screenOffsetY_impl(struct{}{}).(float64)
}

func tileColor_impl(tileType interface{}) interface{} {
	var tmp159 interface{} = tileWall_impl(struct{}{})
	var tmp160 interface{} = EqInt(tileType, tmp159)
	return func() interface{} {
		var tmp161 interface{} = tileDomeEdge_impl(struct{}{})
		_ = tmp161 // suppress unused
		var tmp162 interface{} = EqInt(tileType, tmp161)
		_ = tmp162 // suppress unused
		var tmp163 interface{} = tileCaptainArea_impl(struct{}{})
		_ = tmp163 // suppress unused
		var tmp164 interface{} = EqInt(tileType, tmp163)
		_ = tmp164 // suppress unused
		var tmp165 interface{} = tileFloorGlow_impl(struct{}{})
		_ = tmp165 // suppress unused
		var tmp166 interface{} = EqInt(tileType, tmp165)
		_ = tmp166 // suppress unused
		var tmp167 interface{} = tileWalkway_impl(struct{}{})
		_ = tmp167 // suppress unused
		var tmp168 interface{} = EqInt(tileType, tmp167)
		_ = tmp168 // suppress unused
		if tmp160.(bool) {
			return colorWall_impl(struct{}{})
		}
		if tmp162.(bool) {
			return colorDomeEdge_impl(struct{}{})
		}
		if tmp164.(bool) {
			return colorCaptainArea_impl(struct{}{})
		}
		if tmp166.(bool) {
			return colorFloorGlow_impl(struct{}{})
		}
		if tmp168.(bool) {
			return colorWalkway_impl(struct{}{})
		}
		return colorFloor_impl(struct{}{})
	}()
}

func tileColor(tileType int64) int64 {
	return tileColor_impl(tileType).(int64)
}

func renderTileAt_impl(worldX interface{}, worldY interface{}, camX interface{}, camY interface{}, tileType interface{}) interface{} {
	var tmp169 interface{} = makeCoord_impl(worldX, worldY)
	var tmp170 interface{} = tileFloor_impl(struct{}{})
	var tmp171 interface{} = layerFloor_impl(struct{}{})
	var tmp172 interface{} = tileColor_impl(tileType)
	return NewDrawCmdIsoTile(tmp169.(*Coord), int64(0), tmp170.(int64), tmp171.(int64), tmp172.(int64))
}

func renderTileAt(worldX int64, worldY int64, camX int64, camY int64, tileType int64) *DrawCmd {
	return renderTileAt_impl(worldX, worldY, camX, camY, tileType).(*DrawCmd)
}

func renderFloorRowViewportRec_impl(state interface{}, x interface{}, y interface{}, maxX interface{}, acc interface{}) interface{} {
	var tmp173 interface{} = GtInt(x, maxX)
	return func() interface{} {
		var tType interface{} = func() interface{} {
			var tmp182 interface{} = FieldGet(state, "discCenterX")
			_ = tmp182 // suppress unused
			return func() interface{} {
				var tmp183 interface{} = FieldGet(state, "discCenterY")
				_ = tmp183 // suppress unused
				return func() interface{} {
					var tmp184 interface{} = FieldGet(state, "discRadius")
					_ = tmp184 // suppress unused
					return getTileType_impl(x, y, tmp182, tmp183, tmp184)
				}()
			}()
		}()
		_ = tType // suppress unused
		var tmp174 interface{} = tileWall_impl(struct{}{})
		_ = tmp174 // suppress unused
		var tmp175 interface{} = EqInt(tType, tmp174)
		_ = tmp175 // suppress unused
		if tmp173.(bool) {
			return acc
		}
		if tmp175.(bool) {
			return func() interface{} {
				var tmp176 interface{} = AddInt(x, int64(1))
				_ = tmp176 // suppress unused
				return renderFloorRowViewportRec_impl(state, tmp176, y, maxX, acc)
			}()
		}
		return func() interface{} {
			var tmp177 interface{} = AddInt(x, int64(1))
			_ = tmp177 // suppress unused
			return func() interface{} {
				var tmp178 interface{} = FieldGet(state, "cameraX")
				_ = tmp178 // suppress unused
				return func() interface{} {
					var tmp179 interface{} = FieldGet(state, "cameraY")
					_ = tmp179 // suppress unused
					return func() interface{} {
						var tmp180 interface{} = renderTileAt_impl(x, y, tmp178, tmp179, tType)
						_ = tmp180 // suppress unused
						return func() interface{} {
							var tmp181 interface{} = Cons(tmp180, acc)
							_ = tmp181 // suppress unused
							return renderFloorRowViewportRec_impl(state, tmp177, y, maxX, tmp181)
						}()
					}()
				}()
			}()
		}()
	}()
}

func renderFloorRowViewportRec(state *BridgeState, x int64, y int64, maxX int64, acc []*DrawCmd) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderFloorRowViewportRec_impl(state, x, y, maxX, acc))
}

func renderFloorRowViewport_impl(state interface{}, x interface{}, y interface{}, maxX interface{}) interface{} {
	var tmp185 interface{} = []interface{}{}
	return renderFloorRowViewportRec_impl(state, x, y, maxX, tmp185)
}

func renderFloorRowViewport(state *BridgeState, x int64, y int64, maxX int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderFloorRowViewport_impl(state, x, y, maxX))
}

func renderFloorRowsViewport_impl(state interface{}, y interface{}, maxY interface{}, minX interface{}, maxX interface{}) interface{} {
	var tmp186 interface{} = GtInt(y, maxY)
	return func() interface{} {
		if tmp186.(bool) {
			return []interface{}{}
		}
		return func() interface{} {
			var tmp187 interface{} = renderFloorRowViewport_impl(state, minX, y, maxX)
			_ = tmp187 // suppress unused
			var tmp188 interface{} = AddInt(y, int64(1))
			_ = tmp188 // suppress unused
			var tmp189 interface{} = renderFloorRowsViewport_impl(state, tmp188, maxY, minX, maxX)
			_ = tmp189 // suppress unused
			return Concat(tmp187, tmp189)
		}()
	}()
}

func renderFloorRowsViewport(state *BridgeState, y int64, maxY int64, minX int64, maxX int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderFloorRowsViewport_impl(state, y, maxY, minX, maxX))
}

func renderBridgeFloor_impl(state interface{}) interface{} {
	var vp interface{} = viewportSize_impl(struct{}{})
	var minX interface{} = func() interface{} {
		var tmp193 interface{} = FieldGet(state, "cameraX")
		_ = tmp193 // suppress unused
		return SubInt(tmp193, vp)
	}()
	var maxX interface{} = func() interface{} {
		var tmp192 interface{} = FieldGet(state, "cameraX")
		_ = tmp192 // suppress unused
		return AddInt(tmp192, vp)
	}()
	var minY interface{} = func() interface{} {
		var tmp191 interface{} = FieldGet(state, "cameraY")
		_ = tmp191 // suppress unused
		return SubInt(tmp191, vp)
	}()
	var maxY interface{} = func() interface{} {
		var tmp190 interface{} = FieldGet(state, "cameraY")
		_ = tmp190 // suppress unused
		return AddInt(tmp190, vp)
	}()
	return renderFloorRowsViewport_impl(state, minY, maxY, minX, maxX)
}

func RenderBridgeFloor(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderBridgeFloor_impl(state))
}

func inViewport_impl(wx interface{}, wy interface{}, camX interface{}, camY interface{}) interface{} {
	var vp interface{} = viewportSize_impl(struct{}{})
	var dx interface{} = SubInt(wx, camX)
	var dy interface{} = SubInt(wy, camY)
	var tmp194 interface{} = SubInt(int64(0), vp)
	var tmp195 interface{} = SubInt(tmp194, int64(2))
	var tmp196 interface{} = GeInt(dx, tmp195)
	var tmp197 interface{} = AddInt(vp, int64(2))
	var tmp198 interface{} = LeInt(dx, tmp197)
	var tmp199 interface{} = func() interface{} {
		if tmp196.(bool) {
			return tmp198
		}
		return false
	}()
	var tmp200 interface{} = SubInt(int64(0), vp)
	var tmp201 interface{} = SubInt(tmp200, int64(2))
	var tmp202 interface{} = GeInt(dy, tmp201)
	var tmp203 interface{} = func() interface{} {
		if tmp199.(bool) {
			return tmp202
		}
		return false
	}()
	var tmp204 interface{} = AddInt(vp, int64(2))
	var tmp205 interface{} = LeInt(dy, tmp204)
	return func() interface{} {
		if tmp203.(bool) {
			return tmp205
		}
		return false
	}()
}

func inViewport(wx int64, wy int64, camX int64, camY int64) bool {
	return inViewport_impl(wx, wy, camX, camY).(bool)
}

func consoleColor_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return colorHelm_impl(struct{}{})
		case BridgeStationKindStationComms:
			return colorComms_impl(struct{}{})
		case BridgeStationKindStationStatus:
			return colorStatus_impl(struct{}{})
		case BridgeStationKindStationNav:
			return colorNav_impl(struct{}{})
		case BridgeStationKindStationScience:
			return colorScience_impl(struct{}{})
		case BridgeStationKindStationCaptain:
			return colorCaptain_impl(struct{}{})
		case BridgeStationKindStationNone:
			return colorFloor_impl(struct{}{})
		default:
			panic("non-exhaustive match")
		}
	}()
}

func consoleColor(station *BridgeStation) int64 {
	return consoleColor_impl(station).(int64)
}

func crewColor_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return colorCrewPilot_impl(struct{}{})
		case BridgeStationKindStationComms:
			return colorCrewComms_impl(struct{}{})
		case BridgeStationKindStationStatus:
			return colorCrewEngineer_impl(struct{}{})
		case BridgeStationKindStationNav:
			return colorCrewEngineer_impl(struct{}{})
		case BridgeStationKindStationScience:
			return colorCrewScientist_impl(struct{}{})
		case BridgeStationKindStationCaptain:
			return colorCrewCaptain_impl(struct{}{})
		case BridgeStationKindStationNone:
			return colorPlayer_impl(struct{}{})
		default:
			panic("non-exhaustive match")
		}
	}()
}

func crewColor(station *BridgeStation) int64 {
	return crewColor_impl(station).(int64)
}

func stationEntityId_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return "console_helm"
		case BridgeStationKindStationComms:
			return "console_comms"
		case BridgeStationKindStationStatus:
			return "console_status"
		case BridgeStationKindStationNav:
			return "console_nav"
		case BridgeStationKindStationScience:
			return "console_science"
		case BridgeStationKindStationCaptain:
			return "console_captain"
		case BridgeStationKindStationNone:
			return "console_none"
		default:
			panic("non-exhaustive match")
		}
	}()
}

func stationEntityId(station *BridgeStation) string {
	return stationEntityId_impl(station).(string)
}

func renderConsole_impl(console interface{}, camX interface{}, camY interface{}) interface{} {
	var entityId interface{} = func() interface{} {
		var tmp210 interface{} = FieldGet(console, "station")
		_ = tmp210 // suppress unused
		return stationEntityId_impl(tmp210)
	}()
	var tmp206 interface{} = FieldGet(console, "pos")
	var tmp207 interface{} = FieldGet(console, "spriteId")
	var tmp208 interface{} = layerConsoles_impl(struct{}{})
	var tmp209 interface{} = NewDrawCmdIsoEntity(entityId.(string), tmp206.(*Coord), float64(0), float64(0), int64(0), tmp207.(int64), tmp208.(int64))
	return []interface{}{tmp209}
}

func renderConsole(console *ConsoleState, camX int64, camY int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderConsole_impl(console, camX, camY))
}

func renderConsolesRec_impl(consoles interface{}, camX interface{}, camY interface{}) interface{} {
	return func() interface{} {
		_scrutinee := consoles
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return []interface{}{}
		} else if ListLen(_scrutinee) >= 1 {
			c := ListHead(_scrutinee)
			_ = c // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp211 interface{} = FieldGet(c, "pos")
				_ = tmp211 // suppress unused
				var tmp212 interface{} = FieldGet(tmp211, "x")
				_ = tmp212 // suppress unused
				var tmp213 interface{} = FieldGet(c, "pos")
				_ = tmp213 // suppress unused
				var tmp214 interface{} = FieldGet(tmp213, "y")
				_ = tmp214 // suppress unused
				var tmp215 interface{} = inViewport_impl(tmp212, tmp214, camX, camY)
				_ = tmp215 // suppress unused
				return func() interface{} {
					if tmp215.(bool) {
						return func() interface{} {
							var tmp216 interface{} = renderConsole_impl(c, camX, camY)
							_ = tmp216 // suppress unused
							return func() interface{} {
								var tmp217 interface{} = renderConsolesRec_impl(rest, camX, camY)
								_ = tmp217 // suppress unused
								return Concat(tmp216, tmp217)
							}()
						}()
					}
					return renderConsolesRec_impl(rest, camX, camY)
				}()
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func renderConsolesRec(consoles []*ConsoleState, camX int64, camY int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderConsolesRec_impl(consoles, camX, camY))
}

func renderConsoles_impl(state interface{}) interface{} {
	var tmp218 interface{} = FieldGet(state, "consoles")
	var tmp219 interface{} = FieldGet(state, "cameraX")
	var tmp220 interface{} = FieldGet(state, "cameraY")
	return renderConsolesRec_impl(tmp218, tmp219, tmp220)
}

func RenderConsoles(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderConsoles_impl(state))
}

func renderCrewMember_impl(crew interface{}, camX interface{}, camY interface{}) interface{} {
	var entityId interface{} = func() interface{} {
		var tmp225 interface{} = FieldGet(crew, "crew")
		_ = tmp225 // suppress unused
		return FieldGet(tmp225, "name")
	}()
	var sprite interface{} = func() interface{} {
		var tmp224 interface{} = FieldGet(crew, "station")
		_ = tmp224 // suppress unused
		return crewSprite_impl(tmp224)
	}()
	var tmp221 interface{} = FieldGet(crew, "pos")
	var tmp222 interface{} = layerCrew_impl(struct{}{})
	var tmp223 interface{} = NewDrawCmdIsoEntity(entityId.(string), tmp221.(*Coord), float64(0), float64(0), int64(0), sprite.(int64), tmp222.(int64))
	return []interface{}{tmp223}
}

func renderCrewMember(crew *CrewPosition, camX int64, camY int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderCrewMember_impl(crew, camX, camY))
}

func renderCrewRec_impl(crew interface{}, camX interface{}, camY interface{}) interface{} {
	return func() interface{} {
		_scrutinee := crew
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return []interface{}{}
		} else if ListLen(_scrutinee) >= 1 {
			c := ListHead(_scrutinee)
			_ = c // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp226 interface{} = FieldGet(c, "pos")
				_ = tmp226 // suppress unused
				var tmp227 interface{} = FieldGet(tmp226, "x")
				_ = tmp227 // suppress unused
				var tmp228 interface{} = FieldGet(c, "pos")
				_ = tmp228 // suppress unused
				var tmp229 interface{} = FieldGet(tmp228, "y")
				_ = tmp229 // suppress unused
				var tmp230 interface{} = inViewport_impl(tmp227, tmp229, camX, camY)
				_ = tmp230 // suppress unused
				return func() interface{} {
					if tmp230.(bool) {
						return func() interface{} {
							var tmp231 interface{} = renderCrewMember_impl(c, camX, camY)
							_ = tmp231 // suppress unused
							return func() interface{} {
								var tmp232 interface{} = renderCrewRec_impl(rest, camX, camY)
								_ = tmp232 // suppress unused
								return Concat(tmp231, tmp232)
							}()
						}()
					}
					return renderCrewRec_impl(rest, camX, camY)
				}()
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func renderCrewRec(crew []*CrewPosition, camX int64, camY int64) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderCrewRec_impl(crew, camX, camY))
}

func renderBridgeCrew_impl(state interface{}) interface{} {
	var tmp233 interface{} = FieldGet(state, "crewPositions")
	var tmp234 interface{} = FieldGet(state, "cameraX")
	var tmp235 interface{} = FieldGet(state, "cameraY")
	return renderCrewRec_impl(tmp233, tmp234, tmp235)
}

func RenderBridgeCrew(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderBridgeCrew_impl(state))
}

func renderPlayer_impl(state interface{}) interface{} {
	var tmp236 interface{} = FieldGet(state, "playerPos")
	var tmp237 interface{} = spritePlayer_impl(struct{}{})
	var tmp238 interface{} = layerPlayer_impl(struct{}{})
	var tmp239 interface{} = NewDrawCmdIsoEntity("player", tmp236.(*Coord), float64(0), float64(0), int64(0), tmp237.(int64), tmp238.(int64))
	return []interface{}{tmp239}
}

func RenderPlayer(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderPlayer_impl(state))
}

func stationName_impl(station interface{}) interface{} {
	return func() interface{} {
		_scrutinee := station
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*BridgeStation)
		switch _adt.Kind {
		case BridgeStationKindStationHelm:
			return "HELM"
		case BridgeStationKindStationComms:
			return "COMMS"
		case BridgeStationKindStationStatus:
			return "STATUS"
		case BridgeStationKindStationScience:
			return "SCIENCE"
		default:
			stationWeapons := _adt
			_ = stationWeapons // suppress unused
			return "WEAPONS"
		}
	}()
}

func stationName(station *BridgeStation) string {
	return stationName_impl(station).(string)
}

func colorDarkBg_impl(_unused0 interface{}) interface{} {
	return int64(540029132)
}

func colorDarkBg() int64 {
	return colorDarkBg_impl(struct{}{}).(int64)
}

func colorYellow_impl(_unused0 interface{}) interface{} {
	return int64(4293559551)
}

func colorYellow() int64 {
	return colorYellow_impl(struct{}{}).(int64)
}

func colorPanelBg_impl(_unused0 interface{}) interface{} {
	return int64(270545120)
}

func colorPanelBg() int64 {
	return colorPanelBg_impl(struct{}{}).(int64)
}

func colorUIGreen_impl(_unused0 interface{}) interface{} {
	return int64(1157595391)
}

func colorUIGreen() int64 {
	return colorUIGreen_impl(struct{}{}).(int64)
}

func colorUIGray_impl(_unused0 interface{}) interface{} {
	return int64(2290649343)
}

func colorUIGray() int64 {
	return colorUIGray_impl(struct{}{}).(int64)
}

func renderInteractionPrompt_impl(state interface{}) interface{} {
	var tmp240 interface{} = FieldGet(state, "hoveredInteractable")
	return func() interface{} {
		_scrutinee := tmp240
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*Option)
		switch _adt.Kind {
		default:
			none := _adt
			_ = none // suppress unused
			return []interface{}{}
		case OptionKindSome:
			interactable := _adt.Some.Value0
			_ = interactable // suppress unused
			return func() interface{} {
				_scrutinee := interactable
				_ = _scrutinee // suppress unused
				_adt := _scrutinee.(*InteractableID)
				switch _adt.Kind {
				case InteractableIDKindInteractConsole:
					station := _adt.InteractConsole.Value0
					_ = station // suppress unused
					return func() interface{} {
						var tmp241 interface{} = colorDarkBg_impl(struct{}{})
						_ = tmp241 // suppress unused
						var tmp242 interface{} = layerUI_impl(struct{}{})
						_ = tmp242 // suppress unused
						var tmp243 interface{} = NewDrawCmdRectRGBA(float64(480), float64(650), float64(320), float64(40), tmp241.(int64), tmp242.(int64))
						_ = tmp243 // suppress unused
						var tmp244 interface{} = colorYellow_impl(struct{}{})
						_ = tmp244 // suppress unused
						var tmp245 interface{} = layerUI_impl(struct{}{})
						_ = tmp245 // suppress unused
						var tmp246 interface{} = AddInt(tmp245, int64(1))
						_ = tmp246 // suppress unused
						var tmp247 interface{} = NewDrawCmdText("Press E: Interact", float64(530), float64(665), int64(12), tmp244.(int64), tmp246.(int64))
						_ = tmp247 // suppress unused
						return []interface{}{tmp243, tmp247}
					}()
				case InteractableIDKindInteractCrew:
					crew := _adt.InteractCrew.Value0
					_ = crew // suppress unused
					return func() interface{} {
						var tmp248 interface{} = colorDarkBg_impl(struct{}{})
						_ = tmp248 // suppress unused
						var tmp249 interface{} = layerUI_impl(struct{}{})
						_ = tmp249 // suppress unused
						var tmp250 interface{} = NewDrawCmdRectRGBA(float64(480), float64(650), float64(320), float64(40), tmp248.(int64), tmp249.(int64))
						_ = tmp250 // suppress unused
						var tmp251 interface{} = colorYellow_impl(struct{}{})
						_ = tmp251 // suppress unused
						var tmp252 interface{} = layerUI_impl(struct{}{})
						_ = tmp252 // suppress unused
						var tmp253 interface{} = AddInt(tmp252, int64(1))
						_ = tmp253 // suppress unused
						var tmp254 interface{} = NewDrawCmdText("Press E: Talk", float64(530), float64(665), int64(12), tmp251.(int64), tmp253.(int64))
						_ = tmp254 // suppress unused
						return []interface{}{tmp250, tmp254}
					}()
				case InteractableIDKindInteractHatch:
					deck := _adt.InteractHatch.Value0
					_ = deck // suppress unused
					return func() interface{} {
						var tmp255 interface{} = colorDarkBg_impl(struct{}{})
						_ = tmp255 // suppress unused
						var tmp256 interface{} = layerUI_impl(struct{}{})
						_ = tmp256 // suppress unused
						var tmp257 interface{} = NewDrawCmdRectRGBA(float64(480), float64(650), float64(320), float64(40), tmp255.(int64), tmp256.(int64))
						_ = tmp257 // suppress unused
						var tmp258 interface{} = colorYellow_impl(struct{}{})
						_ = tmp258 // suppress unused
						var tmp259 interface{} = layerUI_impl(struct{}{})
						_ = tmp259 // suppress unused
						var tmp260 interface{} = AddInt(tmp259, int64(1))
						_ = tmp260 // suppress unused
						var tmp261 interface{} = NewDrawCmdText("Press E: Use hatch", float64(530), float64(665), int64(12), tmp258.(int64), tmp260.(int64))
						_ = tmp261 // suppress unused
						return []interface{}{tmp257, tmp261}
					}()
				default:
					panic("non-exhaustive match")
				}
			}()
		}
	}()
}

func RenderInteractionPrompt(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderInteractionPrompt_impl(state))
}

func renderSelectedPanel_impl(state interface{}) interface{} {
	var tmp262 interface{} = FieldGet(state, "selectedInteractable")
	return func() interface{} {
		_scrutinee := tmp262
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*Option)
		switch _adt.Kind {
		default:
			none := _adt
			_ = none // suppress unused
			return []interface{}{}
		case OptionKindSome:
			interactable := _adt.Some.Value0
			_ = interactable // suppress unused
			return func() interface{} {
				_scrutinee := interactable
				_ = _scrutinee // suppress unused
				_adt := _scrutinee.(*InteractableID)
				switch _adt.Kind {
				case InteractableIDKindInteractConsole:
					station := _adt.InteractConsole.Value0
					_ = station // suppress unused
					return func() interface{} {
						var tmp263 interface{} = colorPanelBg_impl(struct{}{})
						_ = tmp263 // suppress unused
						var tmp264 interface{} = layerUI_impl(struct{}{})
						_ = tmp264 // suppress unused
						var tmp265 interface{} = NewDrawCmdRectRGBA(float64(880), float64(100), float64(360), float64(280), tmp263.(int64), tmp264.(int64))
						_ = tmp265 // suppress unused
						var tmp266 interface{} = consoleColor_impl(station)
						_ = tmp266 // suppress unused
						var tmp267 interface{} = layerUI_impl(struct{}{})
						_ = tmp267 // suppress unused
						var tmp268 interface{} = AddInt(tmp267, int64(1))
						_ = tmp268 // suppress unused
						var tmp269 interface{} = NewDrawCmdRectRGBA(float64(880), float64(100), float64(360), float64(40), tmp266.(int64), tmp268.(int64))
						_ = tmp269 // suppress unused
						var tmp270 interface{} = stationName_impl(station)
						_ = tmp270 // suppress unused
						var tmp271 interface{} = colorWhite_impl(struct{}{})
						_ = tmp271 // suppress unused
						var tmp272 interface{} = layerUI_impl(struct{}{})
						_ = tmp272 // suppress unused
						var tmp273 interface{} = AddInt(tmp272, int64(2))
						_ = tmp273 // suppress unused
						var tmp274 interface{} = NewDrawCmdText(tmp270.(string), float64(1000), float64(115), int64(14), tmp271.(int64), tmp273.(int64))
						_ = tmp274 // suppress unused
						var tmp275 interface{} = colorUIGreen_impl(struct{}{})
						_ = tmp275 // suppress unused
						var tmp276 interface{} = layerUI_impl(struct{}{})
						_ = tmp276 // suppress unused
						var tmp277 interface{} = AddInt(tmp276, int64(2))
						_ = tmp277 // suppress unused
						var tmp278 interface{} = NewDrawCmdText("Status: OPERATIONAL", float64(900), float64(170), int64(12), tmp275.(int64), tmp277.(int64))
						_ = tmp278 // suppress unused
						var tmp279 interface{} = colorUIGray_impl(struct{}{})
						_ = tmp279 // suppress unused
						var tmp280 interface{} = layerUI_impl(struct{}{})
						_ = tmp280 // suppress unused
						var tmp281 interface{} = AddInt(tmp280, int64(2))
						_ = tmp281 // suppress unused
						var tmp282 interface{} = NewDrawCmdText("Press E or ESC to close", float64(900), float64(340), int64(10), tmp279.(int64), tmp281.(int64))
						_ = tmp282 // suppress unused
						return []interface{}{tmp265, tmp269, tmp274, tmp278, tmp282}
					}()
				case InteractableIDKindInteractCrew:
					crew := _adt.InteractCrew.Value0
					_ = crew // suppress unused
					return func() interface{} {
						var tmp283 interface{} = colorPanelBg_impl(struct{}{})
						_ = tmp283 // suppress unused
						var tmp284 interface{} = layerUI_impl(struct{}{})
						_ = tmp284 // suppress unused
						var tmp285 interface{} = NewDrawCmdRectRGBA(float64(880), float64(100), float64(360), float64(280), tmp283.(int64), tmp284.(int64))
						_ = tmp285 // suppress unused
						var tmp286 interface{} = colorPlayer_impl(struct{}{})
						_ = tmp286 // suppress unused
						var tmp287 interface{} = layerUI_impl(struct{}{})
						_ = tmp287 // suppress unused
						var tmp288 interface{} = AddInt(tmp287, int64(1))
						_ = tmp288 // suppress unused
						var tmp289 interface{} = NewDrawCmdRectRGBA(float64(880), float64(100), float64(360), float64(40), tmp286.(int64), tmp288.(int64))
						_ = tmp289 // suppress unused
						var tmp290 interface{} = FieldGet(crew, "name")
						_ = tmp290 // suppress unused
						var tmp291 interface{} = colorWhite_impl(struct{}{})
						_ = tmp291 // suppress unused
						var tmp292 interface{} = layerUI_impl(struct{}{})
						_ = tmp292 // suppress unused
						var tmp293 interface{} = AddInt(tmp292, int64(2))
						_ = tmp293 // suppress unused
						var tmp294 interface{} = NewDrawCmdText(tmp290.(string), float64(1000), float64(115), int64(14), tmp291.(int64), tmp293.(int64))
						_ = tmp294 // suppress unused
						var tmp295 interface{} = colorWhite_impl(struct{}{})
						_ = tmp295 // suppress unused
						var tmp296 interface{} = layerUI_impl(struct{}{})
						_ = tmp296 // suppress unused
						var tmp297 interface{} = AddInt(tmp296, int64(2))
						_ = tmp297 // suppress unused
						var tmp298 interface{} = NewDrawCmdText("Crew Member", float64(900), float64(170), int64(12), tmp295.(int64), tmp297.(int64))
						_ = tmp298 // suppress unused
						var tmp299 interface{} = colorUIGray_impl(struct{}{})
						_ = tmp299 // suppress unused
						var tmp300 interface{} = layerUI_impl(struct{}{})
						_ = tmp300 // suppress unused
						var tmp301 interface{} = AddInt(tmp300, int64(2))
						_ = tmp301 // suppress unused
						var tmp302 interface{} = NewDrawCmdText("Press E or ESC to close", float64(900), float64(340), int64(10), tmp299.(int64), tmp301.(int64))
						_ = tmp302 // suppress unused
						return []interface{}{tmp285, tmp289, tmp294, tmp298, tmp302}
					}()
				case InteractableIDKindInteractHatch:
					deck := _adt.InteractHatch.Value0
					_ = deck // suppress unused
					return func() interface{} {
						var tmp303 interface{} = colorPanelBg_impl(struct{}{})
						_ = tmp303 // suppress unused
						var tmp304 interface{} = layerUI_impl(struct{}{})
						_ = tmp304 // suppress unused
						var tmp305 interface{} = NewDrawCmdRectRGBA(float64(880), float64(100), float64(360), float64(200), tmp303.(int64), tmp304.(int64))
						_ = tmp305 // suppress unused
						var tmp306 interface{} = colorWhite_impl(struct{}{})
						_ = tmp306 // suppress unused
						var tmp307 interface{} = layerUI_impl(struct{}{})
						_ = tmp307 // suppress unused
						var tmp308 interface{} = AddInt(tmp307, int64(1))
						_ = tmp308 // suppress unused
						var tmp309 interface{} = NewDrawCmdText("HATCH", float64(1000), float64(115), int64(14), tmp306.(int64), tmp308.(int64))
						_ = tmp309 // suppress unused
						var tmp310 interface{} = colorUIGray_impl(struct{}{})
						_ = tmp310 // suppress unused
						var tmp311 interface{} = layerUI_impl(struct{}{})
						_ = tmp311 // suppress unused
						var tmp312 interface{} = AddInt(tmp311, int64(2))
						_ = tmp312 // suppress unused
						var tmp313 interface{} = NewDrawCmdText("Press E or ESC to close", float64(900), float64(260), int64(10), tmp310.(int64), tmp312.(int64))
						_ = tmp313 // suppress unused
						return []interface{}{tmp305, tmp309, tmp313}
					}()
				default:
					panic("non-exhaustive match")
				}
			}()
		}
	}()
}

func RenderSelectedPanel(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderSelectedPanel_impl(state))
}

func renderBridge_impl(state interface{}) interface{} {
	var tmp314 interface{} = FieldGet(state, "domeState")
	var tmp315 interface{} = renderDome_impl(tmp314)
	var tmp316 interface{} = renderStruts_impl(state)
	var tmp317 interface{} = Concat(tmp315, tmp316)
	var tmp318 interface{} = renderBridgeFloor_impl(state)
	var tmp319 interface{} = Concat(tmp317, tmp318)
	var tmp320 interface{} = renderConsoles_impl(state)
	var tmp321 interface{} = Concat(tmp319, tmp320)
	var tmp322 interface{} = renderBridgeCrew_impl(state)
	var tmp323 interface{} = Concat(tmp321, tmp322)
	var tmp324 interface{} = renderPlayer_impl(state)
	var tmp325 interface{} = Concat(tmp323, tmp324)
	var tmp326 interface{} = renderInteractionPrompt_impl(state)
	var tmp327 interface{} = Concat(tmp325, tmp326)
	var tmp328 interface{} = renderSelectedPanel_impl(state)
	return Concat(tmp327, tmp328)
}

func RenderBridge(state *BridgeState) []*DrawCmd {
	return ConvertToDrawCmdSlice(renderBridge_impl(state))
}

func keyW_impl(_unused0 interface{}) interface{} {
	return int64(22)
}

func keyW() int64 {
	return keyW_impl(struct{}{}).(int64)
}

func keyA_impl(_unused0 interface{}) interface{} {
	return int64(0)
}

func keyA() int64 {
	return keyA_impl(struct{}{}).(int64)
}

func keyS_impl(_unused0 interface{}) interface{} {
	return int64(18)
}

func keyS() int64 {
	return keyS_impl(struct{}{}).(int64)
}

func keyD_impl(_unused0 interface{}) interface{} {
	return int64(3)
}

func keyD() int64 {
	return keyD_impl(struct{}{}).(int64)
}

func keyUp_impl(_unused0 interface{}) interface{} {
	return int64(31)
}

func keyUp() int64 {
	return keyUp_impl(struct{}{}).(int64)
}

func keyDown_impl(_unused0 interface{}) interface{} {
	return int64(28)
}

func keyDown() int64 {
	return keyDown_impl(struct{}{}).(int64)
}

func keyLeft_impl(_unused0 interface{}) interface{} {
	return int64(29)
}

func keyLeft() int64 {
	return keyLeft_impl(struct{}{}).(int64)
}

func keyRight_impl(_unused0 interface{}) interface{} {
	return int64(30)
}

func keyRight() int64 {
	return keyRight_impl(struct{}{}).(int64)
}

func keyE_impl(_unused0 interface{}) interface{} {
	return int64(4)
}

func keyE() int64 {
	return keyE_impl(struct{}{}).(int64)
}

func keyEscape_impl(_unused0 interface{}) interface{} {
	return int64(56)
}

func keyEscape() int64 {
	return keyEscape_impl(struct{}{}).(int64)
}

func hasKeyRec_impl(keyCode interface{}, keys interface{}) interface{} {
	return func() interface{} {
		_scrutinee := keys
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return false
		} else if ListLen(_scrutinee) >= 1 {
			k := ListHead(_scrutinee)
			_ = k // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp329 interface{} = FieldGet(k, "key")
				_ = tmp329 // suppress unused
				var tmp330 interface{} = EqInt(tmp329, keyCode)
				_ = tmp330 // suppress unused
				var tmp331 interface{} = FieldGet(k, "kind")
				_ = tmp331 // suppress unused
				var tmp332 interface{} = EqString(tmp331, "pressed")
				_ = tmp332 // suppress unused
				var tmp333 interface{} = func() interface{} {
					if tmp330.(bool) {
						return tmp332
					}
					return false
				}()
				_ = tmp333 // suppress unused
				return func() interface{} {
					if tmp333.(bool) {
						return true
					}
					return hasKeyRec_impl(keyCode, rest)
				}()
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func hasKeyRec(keyCode int64, keys []*KeyEvent) bool {
	return hasKeyRec_impl(keyCode, keys).(bool)
}

func hasKey_impl(keyCode interface{}, input interface{}) interface{} {
	var tmp334 interface{} = FieldGet(input, "keys")
	return hasKeyRec_impl(keyCode, tmp334)
}

func hasKey(keyCode int64, input *FrameInput) bool {
	return hasKey_impl(keyCode, input).(bool)
}

func isoMoveUp_impl(_unused0 interface{}) interface{} {
	var tmp335 interface{} = SubInt(int64(0), int64(1))
	var tmp336 interface{} = SubInt(int64(0), int64(1))
	return &IsoMove{Dx: tmp335.(int64), Dy: tmp336.(int64)}
}

func isoMoveUp() *IsoMove {
	return isoMoveUp_impl(struct{}{}).(*IsoMove)
}

func isoMoveDown_impl(_unused0 interface{}) interface{} {
	return &IsoMove{Dx: int64(1), Dy: int64(1)}
}

func isoMoveDown() *IsoMove {
	return isoMoveDown_impl(struct{}{}).(*IsoMove)
}

func isoMoveLeft_impl(_unused0 interface{}) interface{} {
	var tmp337 interface{} = SubInt(int64(0), int64(1))
	return &IsoMove{Dx: tmp337.(int64), Dy: int64(1)}
}

func isoMoveLeft() *IsoMove {
	return isoMoveLeft_impl(struct{}{}).(*IsoMove)
}

func isoMoveRight_impl(_unused0 interface{}) interface{} {
	var tmp338 interface{} = SubInt(int64(0), int64(1))
	return &IsoMove{Dx: int64(1), Dy: tmp338.(int64)}
}

func isoMoveRight() *IsoMove {
	return isoMoveRight_impl(struct{}{}).(*IsoMove)
}

func getIsoMovement_impl(input interface{}) interface{} {
	var tmp339 interface{} = keyW_impl(struct{}{})
	var tmp340 interface{} = hasKey_impl(tmp339, input)
	var tmp341 interface{} = keyUp_impl(struct{}{})
	var tmp342 interface{} = hasKey_impl(tmp341, input)
	var tmp343 interface{} = func() interface{} {
		if tmp340.(bool) {
			return true
		}
		return tmp342
	}()
	return func() interface{} {
		var tmp345 interface{} = keyS_impl(struct{}{})
		_ = tmp345 // suppress unused
		var tmp346 interface{} = hasKey_impl(tmp345, input)
		_ = tmp346 // suppress unused
		var tmp347 interface{} = keyDown_impl(struct{}{})
		_ = tmp347 // suppress unused
		var tmp348 interface{} = hasKey_impl(tmp347, input)
		_ = tmp348 // suppress unused
		var tmp349 interface{} = func() interface{} {
			if tmp346.(bool) {
				return true
			}
			return tmp348
		}()
		_ = tmp349 // suppress unused
		var tmp351 interface{} = keyA_impl(struct{}{})
		_ = tmp351 // suppress unused
		var tmp352 interface{} = hasKey_impl(tmp351, input)
		_ = tmp352 // suppress unused
		var tmp353 interface{} = keyLeft_impl(struct{}{})
		_ = tmp353 // suppress unused
		var tmp354 interface{} = hasKey_impl(tmp353, input)
		_ = tmp354 // suppress unused
		var tmp355 interface{} = func() interface{} {
			if tmp352.(bool) {
				return true
			}
			return tmp354
		}()
		_ = tmp355 // suppress unused
		var tmp357 interface{} = keyD_impl(struct{}{})
		_ = tmp357 // suppress unused
		var tmp358 interface{} = hasKey_impl(tmp357, input)
		_ = tmp358 // suppress unused
		var tmp359 interface{} = keyRight_impl(struct{}{})
		_ = tmp359 // suppress unused
		var tmp360 interface{} = hasKey_impl(tmp359, input)
		_ = tmp360 // suppress unused
		var tmp361 interface{} = func() interface{} {
			if tmp358.(bool) {
				return true
			}
			return tmp360
		}()
		_ = tmp361 // suppress unused
		if tmp343.(bool) {
			return func() interface{} {
				var tmp344 interface{} = isoMoveUp_impl(struct{}{})
				_ = tmp344 // suppress unused
				return NewOptionSome(tmp344)
			}()
		}
		if tmp349.(bool) {
			return func() interface{} {
				var tmp350 interface{} = isoMoveDown_impl(struct{}{})
				_ = tmp350 // suppress unused
				return NewOptionSome(tmp350)
			}()
		}
		if tmp355.(bool) {
			return func() interface{} {
				var tmp356 interface{} = isoMoveLeft_impl(struct{}{})
				_ = tmp356 // suppress unused
				return NewOptionSome(tmp356)
			}()
		}
		if tmp361.(bool) {
			return func() interface{} {
				var tmp362 interface{} = isoMoveRight_impl(struct{}{})
				_ = tmp362 // suppress unused
				return NewOptionSome(tmp362)
			}()
		}
		return NewOptionNone()
	}()
}

func getIsoMovement(input *FrameInput) *Option {
	return getIsoMovement_impl(input).(*Option)
}

func isoMoveToFacing_impl(move interface{}) interface{} {
	var tmp363 interface{} = FieldGet(move, "dy")
	var tmp364 interface{} = LtInt(tmp363, int64(0))
	return func() interface{} {
		var tmp365 interface{} = FieldGet(move, "dy")
		_ = tmp365 // suppress unused
		var tmp366 interface{} = GtInt(tmp365, int64(0))
		_ = tmp366 // suppress unused
		var tmp367 interface{} = FieldGet(move, "dx")
		_ = tmp367 // suppress unused
		var tmp368 interface{} = GtInt(tmp367, int64(0))
		_ = tmp368 // suppress unused
		if tmp364.(bool) {
			return NewDirectionNorth()
		}
		if tmp366.(bool) {
			return NewDirectionSouth()
		}
		if tmp368.(bool) {
			return NewDirectionEast()
		}
		return NewDirectionWest()
	}()
}

func isoMoveToFacing(move *IsoMove) *Direction {
	return isoMoveToFacing_impl(move).(*Direction)
}

func getInputDirection_impl(input interface{}) interface{} {
	var tmp369 interface{} = keyW_impl(struct{}{})
	var tmp370 interface{} = hasKey_impl(tmp369, input)
	var tmp371 interface{} = keyUp_impl(struct{}{})
	var tmp372 interface{} = hasKey_impl(tmp371, input)
	var tmp373 interface{} = func() interface{} {
		if tmp370.(bool) {
			return true
		}
		return tmp372
	}()
	return func() interface{} {
		var tmp374 interface{} = keyS_impl(struct{}{})
		_ = tmp374 // suppress unused
		var tmp375 interface{} = hasKey_impl(tmp374, input)
		_ = tmp375 // suppress unused
		var tmp376 interface{} = keyDown_impl(struct{}{})
		_ = tmp376 // suppress unused
		var tmp377 interface{} = hasKey_impl(tmp376, input)
		_ = tmp377 // suppress unused
		var tmp378 interface{} = func() interface{} {
			if tmp375.(bool) {
				return true
			}
			return tmp377
		}()
		_ = tmp378 // suppress unused
		var tmp379 interface{} = keyA_impl(struct{}{})
		_ = tmp379 // suppress unused
		var tmp380 interface{} = hasKey_impl(tmp379, input)
		_ = tmp380 // suppress unused
		var tmp381 interface{} = keyLeft_impl(struct{}{})
		_ = tmp381 // suppress unused
		var tmp382 interface{} = hasKey_impl(tmp381, input)
		_ = tmp382 // suppress unused
		var tmp383 interface{} = func() interface{} {
			if tmp380.(bool) {
				return true
			}
			return tmp382
		}()
		_ = tmp383 // suppress unused
		var tmp384 interface{} = keyD_impl(struct{}{})
		_ = tmp384 // suppress unused
		var tmp385 interface{} = hasKey_impl(tmp384, input)
		_ = tmp385 // suppress unused
		var tmp386 interface{} = keyRight_impl(struct{}{})
		_ = tmp386 // suppress unused
		var tmp387 interface{} = hasKey_impl(tmp386, input)
		_ = tmp387 // suppress unused
		var tmp388 interface{} = func() interface{} {
			if tmp385.(bool) {
				return true
			}
			return tmp387
		}()
		_ = tmp388 // suppress unused
		if tmp373.(bool) {
			return NewOptionSome(NewDirectionNorth())
		}
		if tmp378.(bool) {
			return NewOptionSome(NewDirectionSouth())
		}
		if tmp383.(bool) {
			return NewOptionSome(NewDirectionWest())
		}
		if tmp388.(bool) {
			return NewOptionSome(NewDirectionEast())
		}
		return NewOptionNone()
	}()
}

func getInputDirection(input *FrameInput) *Option {
	return getInputDirection_impl(input).(*Option)
}

func tryMovePlayer_impl(state interface{}, dir interface{}) interface{} {
	var newPos interface{} = func() interface{} {
		var tmp395 interface{} = FieldGet(state, "playerPos")
		_ = tmp395 // suppress unused
		return moveInDirection_impl(tmp395, dir)
	}()
	var tmp389 interface{} = FieldGet(newPos, "x")
	var tmp390 interface{} = FieldGet(newPos, "y")
	var tmp391 interface{} = isWalkable_impl(state, tmp389, tmp390)
	return func() interface{} {
		if tmp391.(bool) {
			return func() interface{} {
				var tmp392 interface{} = NewMoveStateMoveWalking(dir.(*Direction))
				_ = tmp392 // suppress unused
				var tmp393 interface{} = FieldGet(newPos, "x")
				_ = tmp393 // suppress unused
				var tmp394 interface{} = FieldGet(newPos, "y")
				_ = tmp394 // suppress unused
				return RecordUpdate(state, map[string]interface{}{"playerPos": newPos, "playerFacing": dir, "moveState": tmp392, "cameraX": tmp393, "cameraY": tmp394})
			}()
		}
		return RecordUpdate(state, map[string]interface{}{"playerFacing": dir, "moveState": NewMoveStateMoveIdle()})
	}()
}

func tryMovePlayer(state *BridgeState, dir *Direction) *BridgeState {
	return tryMovePlayer_impl(state, dir).(*BridgeState)
}

func tryMovePlayerIso_impl(state interface{}, move interface{}) interface{} {
	var px interface{} = func() interface{} {
		var tmp402 interface{} = FieldGet(state, "playerPos")
		_ = tmp402 // suppress unused
		return FieldGet(tmp402, "x")
	}()
	var py interface{} = func() interface{} {
		var tmp401 interface{} = FieldGet(state, "playerPos")
		_ = tmp401 // suppress unused
		return FieldGet(tmp401, "y")
	}()
	var newX interface{} = func() interface{} {
		var tmp400 interface{} = FieldGet(move, "dx")
		_ = tmp400 // suppress unused
		return AddInt(px, tmp400)
	}()
	var newY interface{} = func() interface{} {
		var tmp399 interface{} = FieldGet(move, "dy")
		_ = tmp399 // suppress unused
		return AddInt(py, tmp399)
	}()
	var facing interface{} = isoMoveToFacing_impl(move)
	var tmp396 interface{} = isWalkable_impl(state, newX, newY)
	return func() interface{} {
		if tmp396.(bool) {
			return func() interface{} {
				var tmp397 interface{} = makeCoord_impl(newX, newY)
				_ = tmp397 // suppress unused
				var tmp398 interface{} = NewMoveStateMoveWalking(facing.(*Direction))
				_ = tmp398 // suppress unused
				return RecordUpdate(state, map[string]interface{}{"playerPos": tmp397, "playerFacing": facing, "moveState": tmp398, "cameraX": newX, "cameraY": newY})
			}()
		}
		return RecordUpdate(state, map[string]interface{}{"playerFacing": facing, "moveState": NewMoveStateMoveIdle()})
	}()
}

func tryMovePlayerIso(state *BridgeState, move *IsoMove) *BridgeState {
	return tryMovePlayerIso_impl(state, move).(*BridgeState)
}

func setPlayerIdle_impl(state interface{}) interface{} {
	return RecordUpdate(state, map[string]interface{}{"moveState": NewMoveStateMoveIdle()})
}

func setPlayerIdle(state *BridgeState) *BridgeState {
	return setPlayerIdle_impl(state).(*BridgeState)
}

func absInt_impl(x interface{}) interface{} {
	var tmp403 interface{} = LtInt(x, int64(0))
	return func() interface{} {
		if tmp403.(bool) {
			return SubInt(int64(0), x)
		}
		return x
	}()
}

func absInt(x int64) int64 {
	return absInt_impl(x).(int64)
}

func manhattanDistance_impl(a interface{}, b interface{}) interface{} {
	var tmp404 interface{} = FieldGet(a, "x")
	var tmp405 interface{} = FieldGet(b, "x")
	var tmp406 interface{} = SubInt(tmp404, tmp405)
	var tmp407 interface{} = absInt_impl(tmp406)
	var tmp408 interface{} = FieldGet(a, "y")
	var tmp409 interface{} = FieldGet(b, "y")
	var tmp410 interface{} = SubInt(tmp408, tmp409)
	var tmp411 interface{} = absInt_impl(tmp410)
	return AddInt(tmp407, tmp411)
}

func manhattanDistance(a *Coord, b *Coord) int64 {
	return manhattanDistance_impl(a, b).(int64)
}

func isNearConsole_impl(playerPos interface{}, console interface{}) interface{} {
	var tmp412 interface{} = FieldGet(console, "pos")
	var tmp413 interface{} = manhattanDistance_impl(playerPos, tmp412)
	return LeInt(tmp413, int64(2))
}

func isNearConsole(playerPos *Coord, console *ConsoleState) bool {
	return isNearConsole_impl(playerPos, console).(bool)
}

func findNearbyConsoleRec_impl(playerPos interface{}, consoles interface{}) interface{} {
	return func() interface{} {
		_scrutinee := consoles
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return NewOptionNone()
		} else if ListLen(_scrutinee) >= 1 {
			c := ListHead(_scrutinee)
			_ = c // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp414 interface{} = isNearConsole_impl(playerPos, c)
				_ = tmp414 // suppress unused
				return func() interface{} {
					if tmp414.(bool) {
						return func() interface{} {
							var tmp415 interface{} = FieldGet(c, "station")
							_ = tmp415 // suppress unused
							return NewOptionSome(tmp415)
						}()
					}
					return findNearbyConsoleRec_impl(playerPos, rest)
				}()
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func findNearbyConsoleRec(playerPos *Coord, consoles []*ConsoleState) *Option {
	return findNearbyConsoleRec_impl(playerPos, consoles).(*Option)
}

func findNearbyInteractable_impl(state interface{}) interface{} {
	var tmp416 interface{} = FieldGet(state, "playerPos")
	var tmp417 interface{} = FieldGet(state, "consoles")
	var tmp418 interface{} = findNearbyConsoleRec_impl(tmp416, tmp417)
	return func() interface{} {
		_scrutinee := tmp418
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*Option)
		switch _adt.Kind {
		case OptionKindSome:
			station := _adt.Some.Value0
			_ = station // suppress unused
			return func() interface{} {
				var tmp419 interface{} = NewInteractableIDInteractConsole(station.(*BridgeStation))
				_ = tmp419 // suppress unused
				return NewOptionSome(tmp419)
			}()
		default:
			none := _adt
			_ = none // suppress unused
			return NewOptionNone()
		}
	}()
}

func findNearbyInteractable(state *BridgeState) *Option {
	return findNearbyInteractable_impl(state).(*Option)
}

func updateHover_impl(state interface{}) interface{} {
	var tmp420 interface{} = findNearbyInteractable_impl(state)
	return RecordUpdate(state, map[string]interface{}{"hoveredInteractable": tmp420})
}

func updateHover(state *BridgeState) *BridgeState {
	return updateHover_impl(state).(*BridgeState)
}

func deselectInteractable_impl(state interface{}) interface{} {
	return RecordUpdate(state, map[string]interface{}{"selectedInteractable": NewOptionNone()})
}

func deselectInteractable(state *BridgeState) *BridgeState {
	return deselectInteractable_impl(state).(*BridgeState)
}

func selectHovered_impl(state interface{}) interface{} {
	var tmp421 interface{} = FieldGet(state, "hoveredInteractable")
	return RecordUpdate(state, map[string]interface{}{"selectedInteractable": tmp421})
}

func selectHovered(state *BridgeState) *BridgeState {
	return selectHovered_impl(state).(*BridgeState)
}

func toggleSelection_impl(state interface{}) interface{} {
	var tmp422 interface{} = FieldGet(state, "selectedInteractable")
	return func() interface{} {
		_scrutinee := tmp422
		_ = _scrutinee // suppress unused
		_adt := _scrutinee.(*Option)
		switch _adt.Kind {
		case OptionKindSome:
			return deselectInteractable_impl(state)
		default:
			none := _adt
			_ = none // suppress unused
			return selectHovered_impl(state)
		}
	}()
}

func toggleSelection(state *BridgeState) *BridgeState {
	return toggleSelection_impl(state).(*BridgeState)
}

func clearSelection_impl(state interface{}) interface{} {
	return RecordUpdate(state, map[string]interface{}{"selectedInteractable": NewOptionNone()})
}

func clearSelection(state *BridgeState) *BridgeState {
	return clearSelection_impl(state).(*BridgeState)
}

func processBridgeInput_impl(state interface{}, input interface{}) interface{} {
	var afterMove interface{} = func() interface{} {
		var tmp427 interface{} = getIsoMovement_impl(input)
		_ = tmp427 // suppress unused
		return func() interface{} {
			_scrutinee := tmp427
			_ = _scrutinee // suppress unused
			_adt := _scrutinee.(*Option)
			switch _adt.Kind {
			case OptionKindSome:
				move := _adt.Some.Value0
				_ = move // suppress unused
				return tryMovePlayerIso_impl(state, move)
			default:
				none := _adt
				_ = none // suppress unused
				return setPlayerIdle_impl(state)
			}
		}()
	}()
	var afterHover interface{} = updateHover_impl(afterMove)
	var tmp423 interface{} = keyEscape_impl(struct{}{})
	var tmp424 interface{} = hasKey_impl(tmp423, input)
	return func() interface{} {
		var tmp425 interface{} = keyE_impl(struct{}{})
		_ = tmp425 // suppress unused
		var tmp426 interface{} = hasKey_impl(tmp425, input)
		_ = tmp426 // suppress unused
		if tmp424.(bool) {
			return clearSelection_impl(afterHover)
		}
		if tmp426.(bool) {
			return toggleSelection_impl(afterHover)
		}
		return afterHover
	}()
}

func ProcessBridgeInput(state *BridgeState, input *FrameInput) *BridgeState {
	return processBridgeInput_impl(state, input).(*BridgeState)
}

func getPatrolDirection_impl(crewId interface{}, frame interface{}) interface{} {
	var phase interface{} = func() interface{} {
		var tmp428 interface{} = DivInt(frame, int64(30))
		_ = tmp428 // suppress unused
		var tmp429 interface{} = MulInt(crewId, int64(7))
		_ = tmp429 // suppress unused
		var tmp430 interface{} = AddInt(tmp428, tmp429)
		_ = tmp430 // suppress unused
		return ModInt(tmp430, int64(4))
	}()
	return func() interface{} {
		_scrutinee := phase
		_ = _scrutinee // suppress unused
		switch _scrutinee {
		case int64(0):
			return NewDirectionNorth()
		case int64(1):
			return NewDirectionEast()
		case int64(2):
			return NewDirectionSouth()
		default:
			return NewDirectionWest()
		}
	}()
}

func getPatrolDirection(crewId int64, frame int64) *Direction {
	return getPatrolDirection_impl(crewId, frame).(*Direction)
}

func tryMoveCrew_impl(crew interface{}, dir interface{}, state interface{}) interface{} {
	var newPos interface{} = func() interface{} {
		var tmp434 interface{} = FieldGet(crew, "pos")
		_ = tmp434 // suppress unused
		return moveInDirection_impl(tmp434, dir)
	}()
	var tmp431 interface{} = FieldGet(newPos, "x")
	var tmp432 interface{} = FieldGet(newPos, "y")
	var tmp433 interface{} = isWalkable_impl(state, tmp431, tmp432)
	return func() interface{} {
		if tmp433.(bool) {
			return RecordUpdate(crew, map[string]interface{}{"facing": dir, "pos": newPos})
		}
		return RecordUpdate(crew, map[string]interface{}{"facing": dir})
	}()
}

func tryMoveCrew(crew *CrewPosition, dir *Direction, state *BridgeState) *CrewPosition {
	return tryMoveCrew_impl(crew, dir, state).(*CrewPosition)
}

func updateCrewMember_impl(crew interface{}, frame interface{}, state interface{}) interface{} {
	var tmp435 interface{} = ModInt(frame, int64(30))
	var tmp436 interface{} = EqInt(tmp435, int64(0))
	return func() interface{} {
		if tmp436.(bool) {
			return func() interface{} {
				var tmp437 interface{} = FieldGet(crew, "crew")
				_ = tmp437 // suppress unused
				var tmp438 interface{} = FieldGet(tmp437, "id")
				_ = tmp438 // suppress unused
				var tmp439 interface{} = getPatrolDirection_impl(tmp438, frame)
				_ = tmp439 // suppress unused
				return tryMoveCrew_impl(crew, tmp439, state)
			}()
		}
		return crew
	}()
}

func updateCrewMember(crew *CrewPosition, frame int64, state *BridgeState) *CrewPosition {
	return updateCrewMember_impl(crew, frame, state).(*CrewPosition)
}

func updateCrewRec_impl(crew interface{}, frame interface{}, state interface{}) interface{} {
	return func() interface{} {
		_scrutinee := crew
		_ = _scrutinee // suppress unused
		if ListLen(_scrutinee) == 0 {
			return []interface{}{}
		} else if ListLen(_scrutinee) >= 1 {
			c := ListHead(_scrutinee)
			_ = c // suppress unused
			rest := ListTail(_scrutinee)
			_ = rest // suppress unused
			return func() interface{} {
				var tmp440 interface{} = updateCrewMember_impl(c, frame, state)
				_ = tmp440 // suppress unused
				var tmp441 interface{} = updateCrewRec_impl(rest, frame, state)
				_ = tmp441 // suppress unused
				return Cons(tmp440, tmp441)
			}()
		} else {
			panic("non-exhaustive match")
		}
	}()
}

func updateCrewRec(crew []*CrewPosition, frame int64, state *BridgeState) []*CrewPosition {
	return ConvertToCrewPositionSlice(updateCrewRec_impl(crew, frame, state))
}

func stepBridge_impl(state interface{}, frame interface{}) interface{} {
	var dt interface{} = DivFloat(float64(1), float64(60))
	var updatedDome interface{} = func() interface{} {
		var tmp447 interface{} = FieldGet(state, "domeState")
		_ = tmp447 // suppress unused
		return stepDome_impl(tmp447, dt)
	}()
	var updatedDomeView interface{} = func() interface{} {
		var tmp443 interface{} = FieldGet(updatedDome, "targetPlanet")
		_ = tmp443 // suppress unused
		var tmp444 interface{} = FieldGet(updatedDome, "cruiseVelocity")
		_ = tmp444 // suppress unused
		var tmp445 interface{} = FieldGet(state, "domeView")
		_ = tmp445 // suppress unused
		var tmp446 interface{} = FieldGet(tmp445, "viewAngle")
		_ = tmp446 // suppress unused
		return makeDomeViewState_impl(tmp443, tmp444, tmp446)
	}()
	var updatedCrew interface{} = func() interface{} {
		var tmp442 interface{} = FieldGet(state, "crewPositions")
		_ = tmp442 // suppress unused
		return updateCrewRec_impl(tmp442, frame, state)
	}()
	return RecordUpdate(state, map[string]interface{}{"crewPositions": updatedCrew, "domeState": updatedDome, "domeView": updatedDomeView, "tick": frame})
}

func StepBridge(state *BridgeState, frame int64) *BridgeState {
	return stepBridge_impl(state, frame).(*BridgeState)
}
